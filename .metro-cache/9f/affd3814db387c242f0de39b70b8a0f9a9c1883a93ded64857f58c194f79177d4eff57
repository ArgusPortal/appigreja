{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":36,"index":203},"end":{"line":8,"column":52,"index":219}}],"key":"XN65eZP/QkNMzaBAXbG/zPyidpY="}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":32,"index":254},"end":{"line":9,"column":72,"index":294}}],"key":"LvtG747EiSU8GTWdUChkQRwjczg="}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":30,"index":326},"end":{"line":10,"column":68,"index":364}}],"key":"5gWCKrrjrgRIYljcPNzcln9Btzk="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var React = _interopRequireWildcard(require(_dependencyMap[0], \"react\"));\n  function _getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(),\n      t = new WeakMap();\n    return (_getRequireWildcardCache = function (e) {\n      return e ? t : r;\n    })(e);\n  }\n  function _interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != typeof e && \"function\" != typeof e) return {\n      default: e\n    };\n    var t = _getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n      },\n      a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) {\n      var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n      i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n.default = e, t && t.set(e, n), n;\n  }\n  var VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  var shouldPreventRemove = (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) => {\n    var nextRouteKeys = nextRoutes.map(route => route.key);\n\n    // Call these in reverse order so last screens handle the event first\n    var removedRoutes = currentRoutes.filter(route => !nextRouteKeys.includes(route.key)).reverse();\n    var visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    var beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (var route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      var isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      var event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove(_ref) {\n    var getState = _ref.getState,\n      emitter = _ref.emitter,\n      beforeRemoveListeners = _ref.beforeRemoveListeners;\n    var _React$useContext = React.useContext(require(_dependencyMap[1], \"./NavigationBuilderContext.js\").NavigationBuilderContext),\n      addKeyedListener = _React$useContext.addKeyedListener;\n    var route = React.useContext(require(_dependencyMap[2], \"./NavigationRouteContext.js\").NavigationRouteContext);\n    var routeKey = route?.key;\n    React.useEffect(() => {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, action => {\n          var state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":92,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"Object"],[4,8,3,6],[4,9,3,7,"defineProperty"],[4,23,3,21],[4,24,3,22,"exports"],[4,31,3,29],[4,33,3,31],[4,45,3,43],[4,47,3,45],[5,4,4,2,"value"],[5,9,4,7],[5,11,4,9],[6,2,5,0],[6,3,5,1],[6,4,5,2],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"shouldPreventRemove"],[7,29,6,27],[7,32,6,30],[7,37,6,35],[7,38,6,36],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"useOnPreventRemove"],[8,28,7,26],[8,31,7,29,"useOnPreventRemove"],[8,49,7,47],[9,2,8,0],[9,6,8,4,"React"],[9,11,8,9],[9,14,8,12,"_interopRequireWildcard"],[9,37,8,35],[9,38,8,36,"require"],[9,45,8,43],[9,46,8,43,"_dependencyMap"],[9,60,8,43],[9,72,8,51],[9,73,8,52],[9,74,8,53],[10,2,11,0],[10,11,11,9,"_getRequireWildcardCache"],[10,35,11,33,"_getRequireWildcardCache"],[10,36,11,34,"e"],[10,37,11,35],[10,39,11,37],[11,4,11,39],[11,8,11,43],[11,18,11,53],[11,22,11,57],[11,29,11,64,"WeakMap"],[11,36,11,71],[11,38,11,73],[11,45,11,80],[11,49,11,84],[12,4,11,86],[12,8,11,90,"r"],[12,9,11,91],[12,12,11,94],[12,16,11,98,"WeakMap"],[12,23,11,105],[12,24,11,106],[12,25,11,107],[13,6,11,109,"t"],[13,7,11,110],[13,10,11,113],[13,14,11,117,"WeakMap"],[13,21,11,124],[13,22,11,125],[13,23,11,126],[14,4,11,128],[14,11,11,135],[14,12,11,136,"_getRequireWildcardCache"],[14,36,11,160],[14,39,11,163],[14,48,11,163,"_getRequireWildcardCache"],[14,49,11,173,"e"],[14,50,11,174],[14,52,11,176],[15,6,11,178],[15,13,11,185,"e"],[15,14,11,186],[15,17,11,189,"t"],[15,18,11,190],[15,21,11,193,"r"],[15,22,11,194],[16,4,11,196],[16,5,11,197],[16,7,11,199,"e"],[16,8,11,200],[16,9,11,201],[17,2,11,203],[18,2,12,0],[18,11,12,9,"_interopRequireWildcard"],[18,34,12,32,"_interopRequireWildcard"],[18,35,12,33,"e"],[18,36,12,34],[18,38,12,36,"r"],[18,39,12,37],[18,41,12,39],[19,4,12,41],[19,8,12,45],[19,9,12,46,"r"],[19,10,12,47],[19,14,12,51,"e"],[19,15,12,52],[19,19,12,56,"e"],[19,20,12,57],[19,21,12,58,"__esModule"],[19,31,12,68],[19,33,12,70],[19,40,12,77,"e"],[19,41,12,78],[20,4,12,80],[20,8,12,84],[20,12,12,88],[20,17,12,93,"e"],[20,18,12,94],[20,22,12,98],[20,30,12,106],[20,34,12,110],[20,41,12,117,"e"],[20,42,12,118],[20,46,12,122],[20,56,12,132],[20,60,12,136],[20,67,12,143,"e"],[20,68,12,144],[20,70,12,146],[20,77,12,153],[21,6,12,155,"default"],[21,13,12,162],[21,15,12,164,"e"],[22,4,12,166],[22,5,12,167],[23,4,12,169],[23,8,12,173,"t"],[23,9,12,174],[23,12,12,177,"_getRequireWildcardCache"],[23,36,12,201],[23,37,12,202,"r"],[23,38,12,203],[23,39,12,204],[24,4,12,206],[24,8,12,210,"t"],[24,9,12,211],[24,13,12,215,"t"],[24,14,12,216],[24,15,12,217,"has"],[24,18,12,220],[24,19,12,221,"e"],[24,20,12,222],[24,21,12,223],[24,23,12,225],[24,30,12,232,"t"],[24,31,12,233],[24,32,12,234,"get"],[24,35,12,237],[24,36,12,238,"e"],[24,37,12,239],[24,38,12,240],[25,4,12,242],[25,8,12,246,"n"],[25,9,12,247],[25,12,12,250],[26,8,12,252,"__proto__"],[26,17,12,261],[26,19,12,263],[27,6,12,268],[27,7,12,269],[28,6,12,271,"a"],[28,7,12,272],[28,10,12,275,"Object"],[28,16,12,281],[28,17,12,282,"defineProperty"],[28,31,12,296],[28,35,12,300,"Object"],[28,41,12,306],[28,42,12,307,"getOwnPropertyDescriptor"],[28,66,12,331],[29,4,12,333],[29,9,12,338],[29,13,12,342,"u"],[29,14,12,343],[29,18,12,347,"e"],[29,19,12,348],[29,21,12,350],[29,25,12,354],[29,34,12,363],[29,39,12,368,"u"],[29,40,12,369],[29,44,12,373],[29,45,12,374],[29,46,12,375],[29,47,12,376,"hasOwnProperty"],[29,61,12,390],[29,62,12,391,"call"],[29,66,12,395],[29,67,12,396,"e"],[29,68,12,397],[29,70,12,399,"u"],[29,71,12,400],[29,72,12,401],[29,74,12,403],[30,6,12,405],[30,10,12,409,"i"],[30,11,12,410],[30,14,12,413,"a"],[30,15,12,414],[30,18,12,417,"Object"],[30,24,12,423],[30,25,12,424,"getOwnPropertyDescriptor"],[30,49,12,448],[30,50,12,449,"e"],[30,51,12,450],[30,53,12,452,"u"],[30,54,12,453],[30,55,12,454],[30,58,12,457],[30,62,12,461],[31,6,12,463,"i"],[31,7,12,464],[31,12,12,469,"i"],[31,13,12,470],[31,14,12,471,"get"],[31,17,12,474],[31,21,12,478,"i"],[31,22,12,479],[31,23,12,480,"set"],[31,26,12,483],[31,27,12,484],[31,30,12,487,"Object"],[31,36,12,493],[31,37,12,494,"defineProperty"],[31,51,12,508],[31,52,12,509,"n"],[31,53,12,510],[31,55,12,512,"u"],[31,56,12,513],[31,58,12,515,"i"],[31,59,12,516],[31,60,12,517],[31,63,12,520,"n"],[31,64,12,521],[31,65,12,522,"u"],[31,66,12,523],[31,67,12,524],[31,70,12,527,"e"],[31,71,12,528],[31,72,12,529,"u"],[31,73,12,530],[31,74,12,531],[32,4,12,533],[33,4,12,535],[33,11,12,542,"n"],[33,12,12,543],[33,13,12,544,"default"],[33,20,12,551],[33,23,12,554,"e"],[33,24,12,555],[33,26,12,557,"t"],[33,27,12,558],[33,31,12,562,"t"],[33,32,12,563],[33,33,12,564,"set"],[33,36,12,567],[33,37,12,568,"e"],[33,38,12,569],[33,40,12,571,"n"],[33,41,12,572],[33,42,12,573],[33,44,12,575,"n"],[33,45,12,576],[34,2,12,578],[35,2,13,0],[35,6,13,6,"VISITED_ROUTE_KEYS"],[35,24,13,24],[35,27,13,27,"Symbol"],[35,33,13,33],[35,34,13,34],[35,54,13,54],[35,55,13,55],[36,2,14,0],[36,6,14,6,"shouldPreventRemove"],[36,25,14,25],[36,28,14,28,"shouldPreventRemove"],[36,29,14,29,"emitter"],[36,36,14,36],[36,38,14,38,"beforeRemoveListeners"],[36,59,14,59],[36,61,14,61,"currentRoutes"],[36,74,14,74],[36,76,14,76,"nextRoutes"],[36,86,14,86],[36,88,14,88,"action"],[36,94,14,94],[36,99,14,99],[37,4,15,2],[37,8,15,8,"nextRouteKeys"],[37,21,15,21],[37,24,15,24,"nextRoutes"],[37,34,15,34],[37,35,15,35,"map"],[37,38,15,38],[37,39,15,39,"route"],[37,44,15,44],[37,48,15,48,"route"],[37,53,15,53],[37,54,15,54,"key"],[37,57,15,57],[37,58,15,58],[39,4,17,2],[40,4,18,2],[40,8,18,8,"removedRoutes"],[40,21,18,21],[40,24,18,24,"currentRoutes"],[40,37,18,37],[40,38,18,38,"filter"],[40,44,18,44],[40,45,18,45,"route"],[40,50,18,50],[40,54,18,54],[40,55,18,55,"nextRouteKeys"],[40,68,18,68],[40,69,18,69,"includes"],[40,77,18,77],[40,78,18,78,"route"],[40,83,18,83],[40,84,18,84,"key"],[40,87,18,87],[40,88,18,88],[40,89,18,89],[40,90,18,90,"reverse"],[40,97,18,97],[40,98,18,98],[40,99,18,99],[41,4,19,2],[41,8,19,8,"visitedRouteKeys"],[41,24,19,24],[42,4,20,2],[43,4,21,2,"action"],[43,10,21,8],[43,11,21,9,"VISITED_ROUTE_KEYS"],[43,29,21,27],[43,30,21,28],[43,34,21,32],[43,38,21,36,"Set"],[43,41,21,39],[43,42,21,40],[43,43,21,41],[44,4,22,2],[44,8,22,8,"beforeRemoveAction"],[44,26,22,26],[44,29,22,29],[45,6,23,4],[45,9,23,7,"action"],[45,15,23,13],[46,6,24,4],[46,7,24,5,"VISITED_ROUTE_KEYS"],[46,25,24,23],[46,28,24,26,"visitedRouteKeys"],[47,4,25,2],[47,5,25,3],[48,4,26,2],[48,9,26,7],[48,13,26,13,"route"],[48,18,26,18],[48,22,26,22,"removedRoutes"],[48,35,26,35],[48,37,26,37],[49,6,27,4],[49,10,27,8,"visitedRouteKeys"],[49,26,27,24],[49,27,27,25,"has"],[49,30,27,28],[49,31,27,29,"route"],[49,36,27,34],[49,37,27,35,"key"],[49,40,27,38],[49,41,27,39],[49,43,27,41],[50,8,28,6],[51,8,29,6],[52,6,30,4],[54,6,32,4],[55,6,33,4],[55,10,33,10,"isPrevented"],[55,21,33,21],[55,24,33,24,"beforeRemoveListeners"],[55,45,33,45],[55,46,33,46,"route"],[55,51,33,51],[55,52,33,52,"key"],[55,55,33,55],[55,56,33,56],[55,59,33,59,"beforeRemoveAction"],[55,77,33,77],[55,78,33,78],[56,6,34,4],[56,10,34,8,"isPrevented"],[56,21,34,19],[56,23,34,21],[57,8,35,6],[57,15,35,13],[57,19,35,17],[58,6,36,4],[59,6,37,4,"visitedRouteKeys"],[59,22,37,20],[59,23,37,21,"add"],[59,26,37,24],[59,27,37,25,"route"],[59,32,37,30],[59,33,37,31,"key"],[59,36,37,34],[59,37,37,35],[60,6,38,4],[60,10,38,10,"event"],[60,15,38,15],[60,18,38,18,"emitter"],[60,25,38,25],[60,26,38,26,"emit"],[60,30,38,30],[60,31,38,31],[61,8,39,6,"type"],[61,12,39,10],[61,14,39,12],[61,28,39,26],[62,8,40,6,"target"],[62,14,40,12],[62,16,40,14,"route"],[62,21,40,19],[62,22,40,20,"key"],[62,25,40,23],[63,8,41,6,"data"],[63,12,41,10],[63,14,41,12],[64,10,42,8,"action"],[64,16,42,14],[64,18,42,16,"beforeRemoveAction"],[65,8,43,6],[65,9,43,7],[66,8,44,6,"canPreventDefault"],[66,25,44,23],[66,27,44,25],[67,6,45,4],[67,7,45,5],[67,8,45,6],[68,6,46,4],[68,10,46,8,"event"],[68,15,46,13],[68,16,46,14,"defaultPrevented"],[68,32,46,30],[68,34,46,32],[69,8,47,6],[69,15,47,13],[69,19,47,17],[70,6,48,4],[71,4,49,2],[72,4,50,2],[72,11,50,9],[72,16,50,14],[73,2,51,0],[73,3,51,1],[74,2,52,0,"exports"],[74,9,52,7],[74,10,52,8,"shouldPreventRemove"],[74,29,52,27],[74,32,52,30,"shouldPreventRemove"],[74,51,52,49],[75,2,53,0],[75,11,53,9,"useOnPreventRemove"],[75,29,53,27,"useOnPreventRemove"],[75,30,53,27,"_ref"],[75,34,53,27],[75,36,57,3],[76,4,57,3],[76,8,54,2,"getState"],[76,16,54,10],[76,19,54,10,"_ref"],[76,23,54,10],[76,24,54,2,"getState"],[76,32,54,10],[77,6,55,2,"emitter"],[77,13,55,9],[77,16,55,9,"_ref"],[77,20,55,9],[77,21,55,2,"emitter"],[77,28,55,9],[78,6,56,2,"beforeRemoveListeners"],[78,27,56,23],[78,30,56,23,"_ref"],[78,34,56,23],[78,35,56,2,"beforeRemoveListeners"],[78,56,56,23],[79,4,58,2],[79,8,58,2,"_React$useContext"],[79,25,58,2],[79,28,60,6,"React"],[79,33,60,11],[79,34,60,12,"useContext"],[79,44,60,22],[79,45,60,23,"require"],[79,52,60,23],[79,53,60,23,"_dependencyMap"],[79,67,60,23],[79,105,60,49,"NavigationBuilderContext"],[79,129,60,73],[79,130,60,74],[80,6,59,4,"addKeyedListener"],[80,22,59,20],[80,25,59,20,"_React$useContext"],[80,42,59,20],[80,43,59,4,"addKeyedListener"],[80,59,59,20],[81,4,61,2],[81,8,61,8,"route"],[81,13,61,13],[81,16,61,16,"React"],[81,21,61,21],[81,22,61,22,"useContext"],[81,32,61,32],[81,33,61,33,"require"],[81,40,61,33],[81,41,61,33,"_dependencyMap"],[81,55,61,33],[81,91,61,57,"NavigationRouteContext"],[81,113,61,79],[81,114,61,80],[82,4,62,2],[82,8,62,8,"routeKey"],[82,16,62,16],[82,19,62,19,"route"],[82,24,62,24],[82,26,62,26,"key"],[82,29,62,29],[83,4,63,2,"React"],[83,9,63,7],[83,10,63,8,"useEffect"],[83,19,63,17],[83,20,63,18],[83,26,63,24],[84,6,64,4],[84,10,64,8,"routeKey"],[84,18,64,16],[84,20,64,18],[85,8,65,6],[85,15,65,13,"addKeyedListener"],[85,31,65,29],[85,34,65,32],[85,48,65,46],[85,50,65,48,"routeKey"],[85,58,65,56],[85,60,65,58,"action"],[85,66,65,64],[85,70,65,68],[86,10,66,8],[86,14,66,14,"state"],[86,19,66,19],[86,22,66,22,"getState"],[86,30,66,30],[86,31,66,31],[86,32,66,32],[87,10,67,8],[87,17,67,15,"shouldPreventRemove"],[87,36,67,34],[87,37,67,35,"emitter"],[87,44,67,42],[87,46,67,44,"beforeRemoveListeners"],[87,67,67,65],[87,69,67,67,"state"],[87,74,67,72],[87,75,67,73,"routes"],[87,81,67,79],[87,83,67,81],[87,85,67,83],[87,87,67,85,"action"],[87,93,67,91],[87,94,67,92],[88,8,68,6],[88,9,68,7],[88,10,68,8],[89,6,69,4],[90,4,70,2],[90,5,70,3],[90,7,70,5],[90,8,70,6,"addKeyedListener"],[90,24,70,22],[90,26,70,24,"beforeRemoveListeners"],[90,47,70,45],[90,49,70,47,"emitter"],[90,56,70,54],[90,58,70,56,"getState"],[90,66,70,64],[90,68,70,66,"routeKey"],[90,76,70,74],[90,77,70,75],[90,78,70,76],[91,2,71,0],[92,0,71,1],[92,3]],"functionMap":{"names":["<global>","_getRequireWildcardCache","_interopRequireWildcard","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;ACU,4MD;AEC,mkBF;4BGE;uCCC,kBD;6CEG,2CF;CHiC;AME;kBCU;0DCE;ODG;GDE;CNC"}},"type":"js/module"}]}