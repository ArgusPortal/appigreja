{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":1,"column":0},"end":{"line":211,"column":36}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk="}},{"name":"../vendor/emitter/EventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0},"end":{"line":13,"column":58}}],"key":"FSJ8dBSGMPKDnoV5nqp600Oqgzc="}},{"name":"../Utilities/infoLog","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":16,"column":16},"end":{"line":16,"column":47}},{"start":{"line":16,"column":16},"end":{"line":16,"column":47}}],"key":"JOQiliPDxvxpS4qCtoh0JoUHvB4="}},{"name":"invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":18,"column":18},"end":{"line":18,"column":38}}],"key":"oQpL0Es3H146KnQH9ygFeHrzVP4="}},{"name":"./TaskQueue","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":18},"end":{"line":17,"column":40}}],"key":"JdVwdRfYYIkBEefq5ZvEtZ/aHHY="}},{"name":"../BatchedBridge/BatchedBridge","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":15,"column":22},"end":{"line":15,"column":63}}],"key":"RVO988+Zv/6E/rt0hBQ7t8lVl4o="}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  var _EventEmitter = _interopRequireDefault(require(_dependencyMap[1], \"../vendor/emitter/EventEmitter\"));\n  var _emitter = new _EventEmitter.default();\n  var DEBUG_DELAY = 0;\n  var DEBUG = false;\n  var InteractionManager = {\n    Events: {\n      interactionStart: 'interactionStart',\n      interactionComplete: 'interactionComplete'\n    },\n    runAfterInteractions(task) {\n      var tasks = [];\n      var promise = new Promise(resolve => {\n        _scheduleUpdate();\n        if (task) {\n          tasks.push(task);\n        }\n        tasks.push({\n          run: resolve,\n          name: 'resolve ' + (task && task.name || '?')\n        });\n        _taskQueue.enqueueTasks(tasks);\n      });\n      return {\n        then: promise.then.bind(promise),\n        cancel: function () {\n          _taskQueue.cancelTasks(tasks);\n        }\n      };\n    },\n    createInteractionHandle() {\n      DEBUG && require(_dependencyMap[2], \"../Utilities/infoLog\")('InteractionManager: create interaction handle');\n      _scheduleUpdate();\n      var handle = ++_inc;\n      _addInteractionSet.add(handle);\n      return handle;\n    },\n    clearInteractionHandle(handle) {\n      DEBUG && require(_dependencyMap[2], \"../Utilities/infoLog\")('InteractionManager: clear interaction handle');\n      require(_dependencyMap[3], \"invariant\")(!!handle, 'InteractionManager: Must provide a handle to clear.');\n      _scheduleUpdate();\n      _addInteractionSet.delete(handle);\n      _deleteInteractionSet.add(handle);\n    },\n    addListener: _emitter.addListener.bind(_emitter),\n    setDeadline(deadline) {\n      _deadline = deadline;\n    }\n  };\n  var _interactionSet = new Set();\n  var _addInteractionSet = new Set();\n  var _deleteInteractionSet = new Set();\n  var _taskQueue = new (require(_dependencyMap[4], \"./TaskQueue\"))({\n    onMoreTasks: _scheduleUpdate\n  });\n  var _nextUpdateHandle = 0;\n  var _inc = 0;\n  var _deadline = -1;\n  function _scheduleUpdate() {\n    if (!_nextUpdateHandle) {\n      if (_deadline > 0) {\n        _nextUpdateHandle = setTimeout(_processUpdate, 0 + DEBUG_DELAY);\n      } else {\n        _nextUpdateHandle = setImmediate(_processUpdate);\n      }\n    }\n  }\n  function _processUpdate() {\n    _nextUpdateHandle = 0;\n    var interactionCount = _interactionSet.size;\n    _addInteractionSet.forEach(handle => _interactionSet.add(handle));\n    _deleteInteractionSet.forEach(handle => _interactionSet.delete(handle));\n    var nextInteractionCount = _interactionSet.size;\n    if (interactionCount !== 0 && nextInteractionCount === 0) {\n      _emitter.emit(InteractionManager.Events.interactionComplete);\n    } else if (interactionCount === 0 && nextInteractionCount !== 0) {\n      _emitter.emit(InteractionManager.Events.interactionStart);\n    }\n    if (nextInteractionCount === 0) {\n      while (_taskQueue.hasTasksToProcess()) {\n        _taskQueue.processNext();\n        if (_deadline > 0 && require(_dependencyMap[5], \"../BatchedBridge/BatchedBridge\").getEventLoopRunningTime() >= _deadline) {\n          _scheduleUpdate();\n          break;\n        }\n      }\n    }\n    _addInteractionSet.clear();\n    _deleteInteractionSet.clear();\n  }\n  module.exports = InteractionManager;\n});","lineCount":93,"map":[[3,2,13,0],[3,6,13,0,"_EventEmitter"],[3,19,13,0],[3,22,13,0,"_interopRequireDefault"],[3,44,13,0],[3,45,13,0,"require"],[3,52,13,0],[3,53,13,0,"_dependencyMap"],[3,67,13,0],[4,2,22,0],[4,6,22,6,"_emitter"],[4,14,22,14],[4,17,22,17],[4,21,22,21,"EventEmitter"],[4,42,22,33],[4,43,25,3],[4,44,25,4],[5,2,27,0],[5,6,27,6,"DEBUG_DELAY"],[5,17,27,20],[5,20,27,23],[5,21,27,24],[6,2,28,0],[6,6,28,6,"DEBUG"],[6,11,28,18],[6,14,28,21],[6,19,28,26],[7,2,79,0],[7,6,79,6,"InteractionManager"],[7,24,79,24],[7,27,79,27],[8,4,80,2,"Events"],[8,10,80,8],[8,12,80,10],[9,6,81,4,"interactionStart"],[9,22,81,20],[9,24,81,22],[9,42,81,40],[10,6,82,4,"interactionComplete"],[10,25,82,23],[10,27,82,25],[11,4,83,2],[11,5,83,3],[12,4,89,2,"runAfterInteractions"],[12,24,89,22,"runAfterInteractions"],[12,25,89,23,"task"],[12,29,89,34],[12,31,96,4],[13,6,97,4],[13,10,97,10,"tasks"],[13,15,97,28],[13,18,97,31],[13,20,97,33],[14,6,98,4],[14,10,98,10,"promise"],[14,17,98,17],[14,20,98,20],[14,24,98,24,"Promise"],[14,31,98,31],[14,32,98,33,"resolve"],[14,39,98,52],[14,43,98,57],[15,8,99,6,"_scheduleUpdate"],[15,23,99,21],[15,24,99,22],[15,25,99,23],[16,8,100,6],[16,12,100,10,"task"],[16,16,100,14],[16,18,100,16],[17,10,101,8,"tasks"],[17,15,101,13],[17,16,101,14,"push"],[17,20,101,18],[17,21,101,19,"task"],[17,25,101,23],[17,26,101,24],[18,8,102,6],[19,8,103,6,"tasks"],[19,13,103,11],[19,14,103,12,"push"],[19,18,103,16],[19,19,103,17],[20,10,104,8,"run"],[20,13,104,11],[20,15,104,13,"resolve"],[20,22,104,20],[21,10,105,8,"name"],[21,14,105,12],[21,16,105,14],[21,26,105,24],[21,30,105,29,"task"],[21,34,105,33],[21,38,105,37,"task"],[21,42,105,41],[21,43,105,42,"name"],[21,47,105,46],[21,51,105,51],[21,54,105,54],[22,8,106,6],[22,9,106,7],[22,10,106,8],[23,8,107,6,"_taskQueue"],[23,18,107,16],[23,19,107,17,"enqueueTasks"],[23,31,107,29],[23,32,107,30,"tasks"],[23,37,107,35],[23,38,107,36],[24,6,108,4],[24,7,108,5],[24,8,108,6],[25,6,109,4],[25,13,109,11],[26,8,111,6,"then"],[26,12,111,10],[26,14,111,12,"promise"],[26,21,111,19],[26,22,111,20,"then"],[26,26,111,24],[26,27,111,25,"bind"],[26,31,111,29],[26,32,111,30,"promise"],[26,39,111,37],[26,40,111,38],[27,8,112,6,"cancel"],[27,14,112,12],[27,16,112,14],[27,25,112,14,"cancel"],[27,26,112,14],[27,28,112,26],[28,10,113,8,"_taskQueue"],[28,20,113,18],[28,21,113,19,"cancelTasks"],[28,32,113,30],[28,33,113,31,"tasks"],[28,38,113,36],[28,39,113,37],[29,8,114,6],[30,6,115,4],[30,7,115,5],[31,4,116,2],[31,5,116,3],[32,4,121,2,"createInteractionHandle"],[32,27,121,25,"createInteractionHandle"],[32,28,121,25],[32,30,121,36],[33,6,122,4,"DEBUG"],[33,11,122,9],[33,15,122,13,"require"],[33,22,122,13],[33,23,122,13,"_dependencyMap"],[33,37,122,13],[33,66,122,21],[33,113,122,68],[33,114,122,69],[34,6,123,4,"_scheduleUpdate"],[34,21,123,19],[34,22,123,20],[34,23,123,21],[35,6,124,4],[35,10,124,10,"handle"],[35,16,124,16],[35,19,124,19],[35,21,124,21,"_inc"],[35,25,124,25],[36,6,125,4,"_addInteractionSet"],[36,24,125,22],[36,25,125,23,"add"],[36,28,125,26],[36,29,125,27,"handle"],[36,35,125,33],[36,36,125,34],[37,6,126,4],[37,13,126,11,"handle"],[37,19,126,17],[38,4,127,2],[38,5,127,3],[39,4,132,2,"clearInteractionHandle"],[39,26,132,24,"clearInteractionHandle"],[39,27,132,25,"handle"],[39,33,132,39],[39,35,132,41],[40,6,133,4,"DEBUG"],[40,11,133,9],[40,15,133,13,"require"],[40,22,133,13],[40,23,133,13,"_dependencyMap"],[40,37,133,13],[40,66,133,21],[40,112,133,67],[40,113,133,68],[41,6,134,4,"require"],[41,13,134,4],[41,14,134,4,"_dependencyMap"],[41,28,134,4],[41,46,134,14],[41,47,134,15],[41,48,134,16,"handle"],[41,54,134,22],[41,56,134,24],[41,109,134,77],[41,110,134,78],[42,6,135,4,"_scheduleUpdate"],[42,21,135,19],[42,22,135,20],[42,23,135,21],[43,6,136,4,"_addInteractionSet"],[43,24,136,22],[43,25,136,23,"delete"],[43,31,136,29],[43,32,136,30,"handle"],[43,38,136,36],[43,39,136,37],[44,6,137,4,"_deleteInteractionSet"],[44,27,137,25],[44,28,137,26,"add"],[44,31,137,29],[44,32,137,30,"handle"],[44,38,137,36],[44,39,137,37],[45,4,138,2],[45,5,138,3],[46,4,141,2,"addListener"],[46,15,141,13],[46,17,141,16,"_emitter"],[46,25,141,24],[46,26,141,25,"addListener"],[46,37,141,36],[46,38,141,37,"bind"],[46,42,141,41],[46,43,141,42,"_emitter"],[46,51,141,50],[46,52,141,64],[47,4,148,2,"setDeadline"],[47,15,148,13,"setDeadline"],[47,16,148,14,"deadline"],[47,24,148,30],[47,26,148,32],[48,6,149,4,"_deadline"],[48,15,149,13],[48,18,149,16,"deadline"],[48,26,149,24],[49,4,150,2],[50,2,151,0],[50,3,151,1],[51,2,153,0],[51,6,153,6,"_interactionSet"],[51,21,153,21],[51,24,153,24],[51,28,153,28,"Set"],[51,31,153,31],[51,32,153,49],[51,33,153,50],[52,2,154,0],[52,6,154,6,"_addInteractionSet"],[52,24,154,24],[52,27,154,27],[52,31,154,31,"Set"],[52,34,154,34],[52,35,154,52],[52,36,154,53],[53,2,155,0],[53,6,155,6,"_deleteInteractionSet"],[53,27,155,27],[53,30,155,30],[53,34,155,34,"Set"],[53,37,155,37],[53,38,155,46],[53,39,155,47],[54,2,156,0],[54,6,156,6,"_taskQueue"],[54,16,156,16],[54,19,156,19],[54,24,156,19,"require"],[54,31,156,19],[54,32,156,19,"_dependencyMap"],[54,46,156,19],[54,67,156,33],[55,4,156,34,"onMoreTasks"],[55,15,156,45],[55,17,156,47,"_scheduleUpdate"],[56,2,156,62],[56,3,156,63],[56,4,156,64],[57,2,157,0],[57,6,157,4,"_nextUpdateHandle"],[57,23,157,45],[57,26,157,48],[57,27,157,49],[58,2,158,0],[58,6,158,4,"_inc"],[58,10,158,8],[58,13,158,11],[58,14,158,12],[59,2,159,0],[59,6,159,4,"_deadline"],[59,15,159,13],[59,18,159,16],[59,19,159,17],[59,20,159,18],[60,2,164,0],[60,11,164,9,"_scheduleUpdate"],[60,26,164,24,"_scheduleUpdate"],[60,27,164,24],[60,29,164,27],[61,4,165,2],[61,8,165,6],[61,9,165,7,"_nextUpdateHandle"],[61,26,165,24],[61,28,165,26],[62,6,166,4],[62,10,166,8,"_deadline"],[62,19,166,17],[62,22,166,20],[62,23,166,21],[62,25,166,23],[63,8,167,6,"_nextUpdateHandle"],[63,25,167,23],[63,28,167,26,"setTimeout"],[63,38,167,36],[63,39,167,37,"_processUpdate"],[63,53,167,51],[63,55,167,53],[63,56,167,54],[63,59,167,57,"DEBUG_DELAY"],[63,70,167,68],[63,71,167,69],[64,6,168,4],[64,7,168,5],[64,13,168,11],[65,8,169,6,"_nextUpdateHandle"],[65,25,169,23],[65,28,169,26,"setImmediate"],[65,40,169,38],[65,41,169,39,"_processUpdate"],[65,55,169,53],[65,56,169,54],[66,6,170,4],[67,4,171,2],[68,2,172,0],[69,2,177,0],[69,11,177,9,"_processUpdate"],[69,25,177,23,"_processUpdate"],[69,26,177,23],[69,28,177,26],[70,4,178,2,"_nextUpdateHandle"],[70,21,178,19],[70,24,178,22],[70,25,178,23],[71,4,180,2],[71,8,180,8,"interactionCount"],[71,24,180,24],[71,27,180,27,"_interactionSet"],[71,42,180,42],[71,43,180,43,"size"],[71,47,180,47],[72,4,181,2,"_addInteractionSet"],[72,22,181,20],[72,23,181,21,"forEach"],[72,30,181,28],[72,31,181,29,"handle"],[72,37,181,35],[72,41,181,39,"_interactionSet"],[72,56,181,54],[72,57,181,55,"add"],[72,60,181,58],[72,61,181,59,"handle"],[72,67,181,65],[72,68,181,66],[72,69,181,67],[73,4,182,2,"_deleteInteractionSet"],[73,25,182,23],[73,26,182,24,"forEach"],[73,33,182,31],[73,34,182,32,"handle"],[73,40,182,38],[73,44,182,42,"_interactionSet"],[73,59,182,57],[73,60,182,58,"delete"],[73,66,182,64],[73,67,182,65,"handle"],[73,73,182,71],[73,74,182,72],[73,75,182,73],[74,4,183,2],[74,8,183,8,"nextInteractionCount"],[74,28,183,28],[74,31,183,31,"_interactionSet"],[74,46,183,46],[74,47,183,47,"size"],[74,51,183,51],[75,4,185,2],[75,8,185,6,"interactionCount"],[75,24,185,22],[75,29,185,27],[75,30,185,28],[75,34,185,32,"nextInteractionCount"],[75,54,185,52],[75,59,185,57],[75,60,185,58],[75,62,185,60],[76,6,187,4,"_emitter"],[76,14,187,12],[76,15,187,13,"emit"],[76,19,187,17],[76,20,187,18,"InteractionManager"],[76,38,187,36],[76,39,187,37,"Events"],[76,45,187,43],[76,46,187,44,"interactionComplete"],[76,65,187,63],[76,66,187,64],[77,4,188,2],[77,5,188,3],[77,11,188,9],[77,15,188,13,"interactionCount"],[77,31,188,29],[77,36,188,34],[77,37,188,35],[77,41,188,39,"nextInteractionCount"],[77,61,188,59],[77,66,188,64],[77,67,188,65],[77,69,188,67],[78,6,190,4,"_emitter"],[78,14,190,12],[78,15,190,13,"emit"],[78,19,190,17],[78,20,190,18,"InteractionManager"],[78,38,190,36],[78,39,190,37,"Events"],[78,45,190,43],[78,46,190,44,"interactionStart"],[78,62,190,60],[78,63,190,61],[79,4,191,2],[80,4,194,2],[80,8,194,6,"nextInteractionCount"],[80,28,194,26],[80,33,194,31],[80,34,194,32],[80,36,194,34],[81,6,195,4],[81,13,195,11,"_taskQueue"],[81,23,195,21],[81,24,195,22,"hasTasksToProcess"],[81,41,195,39],[81,42,195,40],[81,43,195,41],[81,45,195,43],[82,8,196,6,"_taskQueue"],[82,18,196,16],[82,19,196,17,"processNext"],[82,30,196,28],[82,31,196,29],[82,32,196,30],[83,8,197,6],[83,12,198,8,"_deadline"],[83,21,198,17],[83,24,198,20],[83,25,198,21],[83,29,199,8,"require"],[83,36,199,8],[83,37,199,8,"_dependencyMap"],[83,51,199,8],[83,90,199,22,"getEventLoopRunningTime"],[83,113,199,45],[83,114,199,46],[83,115,199,47],[83,119,199,51,"_deadline"],[83,128,199,60],[83,130,200,8],[84,10,202,8,"_scheduleUpdate"],[84,25,202,23],[84,26,202,24],[84,27,202,25],[85,10,203,8],[86,8,204,6],[87,6,205,4],[88,4,206,2],[89,4,207,2,"_addInteractionSet"],[89,22,207,20],[89,23,207,21,"clear"],[89,28,207,26],[89,29,207,27],[89,30,207,28],[90,4,208,2,"_deleteInteractionSet"],[90,25,208,23],[90,26,208,24,"clear"],[90,31,208,29],[90,32,208,30],[90,33,208,31],[91,2,209,0],[92,2,211,0,"module"],[92,8,211,6],[92,9,211,7,"exports"],[92,16,211,14],[92,19,211,17,"InteractionManager"],[92,37,211,35],[93,0,211,36],[93,3]],"functionMap":{"names":["<global>","runAfterInteractions","Promise$argument_0","cancel","createInteractionHandle","clearInteractionHandle","setDeadline","_scheduleUpdate","_processUpdate","_addInteractionSet.forEach$argument_0","_deleteInteractionSet.forEach$argument_0"],"mappings":"AAA;ECwF;gCCS;KDU;cEI;OFE;GDE;EIK;GJM;EKK;GLM;EMU;GNE;AOc;CPQ;AQK;6BCI,qCD;gCEC,wCF;CR2B"}},"type":"js/module"}]}